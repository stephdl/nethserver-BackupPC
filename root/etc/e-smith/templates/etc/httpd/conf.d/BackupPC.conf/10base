{
    $OUT = '';
    $OUT .= "    ProxyPass /BackupPC http://127.0.0.1:${'httpd-bkpc'}{TCPPort}/BackupPC\n";
    $OUT .= "    ProxyPassReverse /BackupPC http://127.0.0.1:${'httpd-bkpc'}{TCPPort}/BackupPC\n";

    $OUT .=<<"HERE";

    <Location /BackupPC>
        AuthName "BackupPC"
        AuthType Basic
        SSLRequireSSL on
        order deny,allow
        deny from all
        allow from $localAccess
        Satisfy all
    </Location>

HERE

use NethServer::Password;
my $pwd = NethServer::Password::store('libuser');

    $OUT .=<<"HERE";

    Alias /cygwin /usr/share/BackupPC/cygwin

    <Directory /usr/share/BackupPC/cygwin>
        Options -Indexes
        AllowOverride None
        Order Deny,Allow
        Deny from All
        allow from $localAccess
        AuthName "cygwin-rsyncd setup"
        AuthType Basic
        AuthBasicProvider ldap
        AuthLDAPBindDN cn=libuser,dc=directory,dc=nh
        AuthLDAPBindPassword $pwd
        AuthLDAPURL "ldap://localhost/ou=People,dc=directory,dc=nh?uid?sub?(objectClass=posixAccount)"
        require user admin
        Satisfy all
    </Directory>
HERE


}

